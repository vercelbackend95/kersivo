/* =========================================================
   Kersivo — Services (App Tiles Mosaic)
   Apple-ish monochrome cards (premium, calm, no RGB)
   - no colored tones
   - soft glass + top light
   - hover = sheen + crisp border (no lift)
   - mobile mini grid + bottom sheet
   ========================================================= */

.k-services--appTiles{
  padding: clamp(54px, 6.5vw, 92px) 0;
}

/* =========================
   Header (PACKAGES-style)
   ========================= */

.k-svcHead{
  text-align: center;
  margin: 0 auto clamp(18px, 2.6vw, 26px);
  max-width: 86ch;
}

.k-svcHead__kicker{
  font-size: 12px;
  letter-spacing: .18em;
  text-transform: uppercase;
  color: rgba(255,255,255,.60);
  margin-bottom: 10px;
}

.k-svcHead__title{
  margin: 0;
  font-size: var(--h2);
  line-height: 1.06;
  letter-spacing: var(--track-tight);
}

.k-svcHead__grad{
  display: block;
  margin-top: 6px;

  /* neutral “metal sheen” text */
  background: linear-gradient(90deg, rgba(255,255,255,.92), rgba(255,255,255,.62));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.k-svcHead__lead{
  margin: 12px auto 0;
  max-width: var(--measure);
  color: rgba(255,255,255,.74);
  font-size: var(--p);
  line-height: 1.55;
}

/* =========================
   GRID (no fixed row tracks)
   ========================= */

.k-tiles{
  --gap: clamp(16px, 1.8vw, 24px);
  --rowH: clamp(210px, 16.2vw, 248px); /* desktop “unit height” */

  display: grid;
  grid-auto-flow: dense;
  gap: var(--gap);

  align-items: stretch;
  align-content: start;

  padding: 0;
  background: transparent;
  border: 0;
  border-radius: 0;
  box-shadow: none;

  grid-template-columns: repeat(2, minmax(0, 1fr));
  box-sizing: border-box;
}

/* Desktop mosaic: spans only, rows are AUTO (key fix) */
@media (min-width: 1040px){
  .k-tiles{
    grid-template-columns: 1.35fr 1fr 1fr;
    /* IMPORTANT: do NOT set grid-auto-rows here */
  }

  .k-tile--mosaic-leftTall{ grid-row: span 2; }
  .k-tile--mosaic-topWide{ grid-column: span 2; }
  .k-tile--mosaic-bottomWide{ grid-column: span 2; }
}

/* =========================
   TILE BASE (anti-overlap)
   ========================= */

.k-tile{
  position: relative;
  overflow: hidden;
  border-radius: 28px;
  isolation: isolate;

  margin: 0;
  padding: 18px 18px 16px;

  display: grid;
  grid-template-rows: auto auto 1fr auto;
  gap: 12px;

  /* monochrome glass */
  background: rgba(255,255,255,.028);
  border: 1px solid rgba(255,255,255,.10);

  /* reveal */
  opacity: 0;
  transition:
    opacity 520ms ease,
    border-color 420ms cubic-bezier(.2,.9,.2,1),
    box-shadow 420ms cubic-bezier(.2,.9,.2,1);

  /* no layout-affecting motion */
  transform: none;
  z-index: 0;

  min-width: 0;
  min-height: 0;
  align-self: stretch;

  box-shadow:
    0 28px 88px -74px rgba(0,0,0,.96),
    0 1px 0 rgba(255,255,255,.06) inset;
}

.k-tile.is-in{ opacity: 1; }

@media (prefers-reduced-motion: reduce){
  .k-tile{ opacity: 1; transition: none; }
}

@media (min-width: 1040px){
  .k-tile{
    min-height: var(--rowH);
    height: auto;
  }

  .k-tile--mosaic-leftTall{
    min-height: calc(var(--rowH) * 2 + var(--gap));
  }
}

/* Hover: calm sheen, no lift */
@media (hover:hover){
  .k-tile:hover{
    border-color: rgba(255,255,255,.18);
    box-shadow:
      0 38px 124px -92px rgba(0,0,0,.98),
      0 1px 0 rgba(255,255,255,.10) inset;
  }

  .k-tile:hover .k-tile__paper{
    opacity: .60;
  }
}

.k-tile--link{
  text-decoration: none;
  color: inherit;
}

.k-tile--link:focus-visible{
  outline: 2px solid rgba(255,255,255,.32);
  outline-offset: 4px;
  border-radius: 32px;
}

/* inner “edge” */
.k-tile::after{
  content:"";
  position:absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  padding: 1px;

  background: linear-gradient(140deg,
    rgba(255,255,255,.18),
    rgba(255,255,255,.06),
    rgba(255,255,255,.12)
  );

  -webkit-mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  opacity: .55;
}

/* =========================
   Background layers per tile
   (Apple-ish monochrome)
   ========================= */

.k-tile__bg{
  position: absolute;
  inset: 0;
  z-index: -3;

  background:
    radial-gradient(900px 520px at 22% 12%, rgba(255,255,255,.10), transparent 60%),
    radial-gradient(700px 420px at 80% 18%, rgba(255,255,255,.07), transparent 62%),
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0) 52%),
    rgba(8,8,10,.72);
}

.k-tile__paper{
  position: absolute;
  inset: 0;
  z-index: -2;
  pointer-events: none;

  background:
    radial-gradient(680px 220px at 28% 12%, rgba(255,255,255,.10), transparent 62%),
    linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,0) 64%);

  opacity: .42;
}

/* =========================
   TOP (icon + pill)
   ========================= */

.k-tile__top{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
}

.k-tile__topLeft{
  display: inline-flex;
  align-items: center;
  gap: 10px;
  min-width: 0;
}

.k-tile__icon{
  width: 34px;
  height: 34px;
  border-radius: 999px;
  display: grid;
  place-items: center;

  color: rgba(255,255,255,.90);
  background: rgba(255,255,255,.05);
  border: 1px solid rgba(255,255,255,.12);

  box-shadow:
    0 18px 60px -48px rgba(0,0,0,.92),
    0 1px 0 rgba(255,255,255,.08) inset;

  position: relative;
}

/* neutral ring (no RGB) */
.k-tile__icon::after{
  content:"";
  position:absolute;
  inset:-1px;
  border-radius: inherit;
  padding: 1px;

  background: linear-gradient(180deg, rgba(255,255,255,.28), rgba(255,255,255,.10));

  -webkit-mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;

  opacity: .55;
  pointer-events: none;
}

.k-tile__icon svg{
  width: 18px;
  height: 18px;
  opacity: .95;
}

/* =========================
   MEDIA COLLAGE (clipped)
   ========================= */

.k-tile__media{
  position: relative;
  border-radius: 22px;
  overflow: hidden;

  background: rgba(255,255,255,.022);
  border: 1px solid rgba(255,255,255,.10);

  height: 124px;
}

@media (min-width: 1040px){
  .k-tile__media{ height: 132px; }
  .k-tile--mosaic-leftTall .k-tile__media{ height: 150px; }
}

.k-m__a,.k-m__b,.k-m__c,.k-m__d,.k-m__e{
  position: absolute;
  border-radius: 18px;

  /* monochrome panels */
  background: rgba(12,12,14,.58);
  border: 1px solid rgba(255,255,255,.12);
  box-shadow: 0 18px 56px rgba(0,0,0,.34);
}

/* Customization (left tall) */
.k-tile__media--customization .k-m__a{
  width: 62%; height: 74%;
  left: 10%; top: 12%;
  transform: rotate(-5deg);
  background:
    linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,0) 60%),
    rgba(12,12,14,.58);
}
.k-tile__media--customization .k-m__b{
  width: 56%; height: 62%;
  left: 38%; top: 18%;
  transform: rotate(7deg);
  background:
    radial-gradient(260px 160px at 35% 30%, rgba(255,255,255,.08), transparent 70%),
    rgba(12,12,14,.58);
}
.k-tile__media--customization .k-m__c{
  width: 86%; height: 18%;
  left: 7%; bottom: 10%;
  border-radius: 999px;
  background: rgba(255,255,255,.06);
}

/* Scheduling (top wide) */
.k-tile__media--scheduling .k-m__a{
  width: 58%; height: 74%;
  left: 8%; top: 12%;
  border-radius: 22px;
  background:
    linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,0) 60%),
    rgba(12,12,14,.58);
}
.k-tile__media--scheduling .k-m__b{
  width: 34%; height: 64%;
  right: 10%; top: 18%;
  transform: rotate(8deg);
  background:
    radial-gradient(220px 140px at 40% 25%, rgba(255,255,255,.08), transparent 70%),
    rgba(12,12,14,.58);
}
.k-tile__media--scheduling .k-m__c{
  width: 42%; height: 18%;
  left: 12%; bottom: 12%;
  border-radius: 999px;
  background: rgba(255,255,255,.05);
}

/* Wallet */
.k-tile__media--wallet .k-m__a{
  width: 74%; height: 46%;
  left: 13%; top: 18%;
  border-radius: 18px;
  background: rgba(255,255,255,.05);
}
.k-tile__media--wallet .k-m__b{
  width: 54%; height: 16%;
  left: 22%; bottom: 16%;
  border-radius: 999px;
  background: rgba(255,255,255,.05);
}

/* Inbox */
.k-tile__media--inbox .k-m__a{
  width: 82%; height: 20%;
  left: 9%; top: 16%;
  border-radius: 14px;
  background: rgba(255,255,255,.05);
}
.k-tile__media--inbox .k-m__b{
  width: 78%; height: 18%;
  left: 11%; top: 42%;
  border-radius: 14px;
  background: rgba(255,255,255,.045);
}
.k-tile__media--inbox .k-m__c{
  width: 74%; height: 18%;
  left: 13%; top: 64%;
  border-radius: 14px;
  background: rgba(255,255,255,.045);
}

/* Gifts */
.k-tile__media--gifts .k-m__a{
  width: 32%; height: 54%;
  left: 10%; top: 18%;
  transform: rotate(-8deg);
}
.k-tile__media--gifts .k-m__b{
  width: 32%; height: 54%;
  left: 33%; top: 14%;
  transform: rotate(2deg);
  background: rgba(255,255,255,.05);
}
.k-tile__media--gifts .k-m__c{
  width: 32%; height: 54%;
  left: 56%; top: 18%;
  transform: rotate(9deg);
}
.k-tile__media--gifts .k-m__d{
  width: 58%; height: 16%;
  left: 21%; bottom: 14%;
  border-radius: 999px;
  background: rgba(255,255,255,.05);
}

/* Reminders */
.k-tile__media--reminders .k-m__a{
  width: 60%; height: 84%;
  left: 20%; top: 8%;
  border-radius: 24px;
  background:
    linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,0) 60%),
    rgba(12,12,14,.58);
}
.k-tile__media--reminders .k-m__b{
  width: 46%; height: 12%;
  left: 27%; top: 22%;
  border-radius: 999px;
  background: rgba(255,255,255,.05);
}
.k-tile__media--reminders .k-m__c{
  width: 52%; height: 10%;
  left: 24%; top: 42%;
  border-radius: 999px;
  background: rgba(255,255,255,.042);
}
.k-tile__media--reminders .k-m__d{
  width: 40%; height: 12%;
  left: 30%; bottom: 14%;
  border-radius: 999px;
  background: rgba(255,255,255,.05);
}

/* =========================
   TEXT
   ========================= */

.k-tile__content{ min-width: 0; min-height: 0; }

.k-tile__title{
  font-size: clamp(18px, 1.15vw, 22px);
  letter-spacing: var(--track-tight);
  text-shadow: 0 16px 46px rgba(0,0,0,.58);
  margin: 0;
  color: rgba(255,255,255,.94);
}

.k-tile__desc{
  font-size: 14.5px;
  line-height: 1.55;
  color: rgba(255,255,255,.72);
  max-width: 60ch;
  margin: 0;
}

.k-tile__bullets{
  margin: 10px 0 0;
  padding: 0;
  list-style: none;
  display: grid;
  gap: 8px;
}

.k-tile__bullets li{
  display: inline-flex;
  align-items: center;
  gap: 10px;
  font-size: 12.5px;
  color: rgba(255,255,255,.60);
}

.k-tile__bullets li::before{
  content:"";
  width: 7px;
  height: 7px;
  border-radius: 999px;
  background: rgba(255,255,255,.22);
  box-shadow: 0 0 0 5px rgba(255,255,255,.055);
}

.k-tile__foot{
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  gap: 12px;
}

.k-tile__meta{
  font-size: 12.5px;
  color: rgba(255,255,255,.56);
}

/* =========================
   Responsive
   ========================= */

@media (max-width: 1039px){
  .k-tile--mosaic-leftTall,
  .k-tile--mosaic-topWide,
  .k-tile--mosaic-bottomWide{
    grid-column: 1 / -1;
  }

  .k-tile--mosaic-midLeft,
  .k-tile--mosaic-midRight{
    grid-column: span 1;
  }

  .k-tile--mosaic-bottomRight{
    grid-column: 1 / -1;
  }
}

@media (max-width: 739px){
  .k-tiles{ grid-template-columns: 1fr; }

  .k-tile{
    border-radius: 20px;
    padding: 14px 14px 12px;
    gap: 10px;
  }

  .k-tile__media{
    height: 108px;
    border-radius: 18px;
  }

  .k-tile__title{ font-size: 16.5px; }

  .k-tile__desc{
    font-size: 13.5px;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .k-tile__bullets{ display: none; }
}

/* =========================
   Tones (disabled)
   Keep classes in markup if you want, but they do nothing now.
   ========================= */

.k-tile--tone-violet .k-tile__bg,
.k-tile--tone-rose .k-tile__bg,
.k-tile--tone-mint .k-tile__bg,
.k-tile--tone-amber .k-tile__bg,
.k-tile--tone-sunset .k-tile__bg,
.k-tile--tone-sky .k-tile__bg{
  background: inherit;
}

/* =========================================================
   Mobile: Service Map (2×3 mini tiles + bottom sheet)
   ========================================================= */

.k-svcMapWrap{ display:none; }

@media (max-width: 739px){
  .k-svcMapWrap{ display:block; margin-top: 14px; }
  .k-tiles{ display:none; }
}

/* Mini grid */
.k-svcMiniGrid{
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 12px;
}

.k-svcMini{
  position: relative;
  overflow: hidden;
  border-radius: 18px;
  padding: 12px;
  text-align: left;

  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.028);

  display: grid;
  gap: 10px;
  min-height: 108px;
  isolation: isolate;

  box-shadow:
    0 26px 84px -78px rgba(0,0,0,.96),
    0 1px 0 rgba(255,255,255,.06) inset;

  -webkit-tap-highlight-color: transparent;
}

.k-svcMini:focus-visible{
  outline: 2px solid rgba(255,255,255,.30);
  outline-offset: 3px;
}

.k-svcMini__bg,
.k-svcMini__paper{
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index: -1;
}

.k-svcMini__bg{
  background:
    radial-gradient(760px 440px at 24% 12%, rgba(255,255,255,.10), transparent 62%),
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0) 60%),
    rgba(8,8,10,.72);
}

.k-svcMini__paper{
  background:
    radial-gradient(540px 180px at 28% 12%, rgba(255,255,255,.10), transparent 62%),
    linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,0) 64%);
  opacity: .40;
}

/* Top row */
.k-svcMini__top{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
  min-width: 0;
}

.k-svcMini__icon{
  width: 32px;
  height: 32px;
  border-radius: 999px;
  display:grid;
  place-items:center;

  background: rgba(255,255,255,.05);
  border: 1px solid rgba(255,255,255,.12);

  position: relative;
  box-shadow:
    0 18px 60px -50px rgba(0,0,0,.94),
    0 1px 0 rgba(255,255,255,.08) inset;
}

.k-svcMini__icon::after{
  content:"";
  position:absolute;
  inset:-1px;
  border-radius: inherit;
  padding: 1px;

  background: linear-gradient(180deg, rgba(255,255,255,.28), rgba(255,255,255,.10));

  -webkit-mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;

  opacity: .55;
  pointer-events: none;
}

.k-svcMini__icon svg{ width: 16px; height: 16px; opacity: .95; }

.k-svcMini__tag{
  font-size: 11px;
  letter-spacing: .14em;
  text-transform: uppercase;
  color: rgba(255,255,255,.58);
  white-space: nowrap;
}

.k-svcMini__title{
  font-size: 13.5px;
  line-height: 1.25;
  letter-spacing: var(--track-tight);
  color: rgba(255,255,255,.92);

  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Overlay blur */
.k-svcOverlay{
  position: fixed;
  inset: 0;
  z-index: 60;
  background: rgba(0,0,0,.46);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

/* Bottom sheet */
.k-svcSheet{
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 70;

  margin: 10px 10px 10px;
  border-radius: 22px;
  overflow: hidden;
  isolation: isolate;

  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.03);

  box-shadow:
    0 40px 140px -98px rgba(0,0,0,.98),
    0 1px 0 rgba(255,255,255,.08) inset;

  max-height: min(82vh, 720px);
}

.k-svcSheet__bg,
.k-svcSheet__paper{
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index: -1;
}

.k-svcSheet__bg{
  background:
    radial-gradient(900px 520px at 22% 12%, rgba(255,255,255,.10), transparent 60%),
    radial-gradient(700px 420px at 80% 18%, rgba(255,255,255,.07), transparent 62%),
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0) 52%),
    rgba(8,8,10,.74);
}

.k-svcSheet__paper{
  background:
    radial-gradient(680px 220px at 28% 12%, rgba(255,255,255,.10), transparent 62%),
    linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,0) 64%);
  opacity: .50;
}

.k-svcSheet__handle{
  width: 48px;
  height: 5px;
  border-radius: 999px;
  background: rgba(255,255,255,.18);
  margin: 10px auto 2px;
}

.k-svcSheet__head{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap: 12px;
  padding: 10px 12px 0;
}

.k-svcSheet__kicker{
  display:flex;
  flex-direction:column;
  gap: 6px;
  min-width: 0;
}

.k-svcSheet__pill{
  display:inline-flex;
  align-items:center;
  height: 26px;
  padding: 0 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.05);
  color: rgba(255,255,255,.80);
  font-size: 11px;
  letter-spacing: .14em;
  text-transform: uppercase;
  width: fit-content;
}

.k-svcSheet__meta{
  color: rgba(255,255,255,.58);
  font-size: 12.5px;
}

.k-svcSheet__close{
  width: 40px;
  height: 40px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.04);
  color: rgba(255,255,255,.86);
  display:grid;
  place-items:center;
  box-shadow: 0 18px 60px -50px rgba(0,0,0,.92);
}

.k-svcSheet__close:focus-visible{
  outline: 2px solid rgba(255,255,255,.30);
  outline-offset: 3px;
}

.k-svcSheet__content{
  padding: 12px 12px calc(14px + env(safe-area-inset-bottom, 0px));
  display:grid;
  gap: 10px;
}

.k-svcSheet__media{
  height: 132px;
  border-radius: 18px;
}

.k-svcSheet__title{
  margin: 6px 0 0;
  font-size: 18px;
  letter-spacing: var(--track-tight);
  text-shadow: 0 18px 56px rgba(0,0,0,.62);
  color: rgba(255,255,255,.94);
}

.k-svcSheet__desc{
  margin: 0;
  color: rgba(255,255,255,.72);
  font-size: 14px;
  line-height: 1.55;
}

.k-svcSheet__bullets{
  margin: 2px 0 2px;
  padding: 0;
  list-style: none;
  display:grid;
  gap: 8px;
}

.k-svcSheet__bullets li{
  display:flex;
  align-items:center;
  gap: 10px;
  font-size: 12.5px;
  color: rgba(255,255,255,.60);
}

.k-svcSheet__bullets li::before{
  content:"";
  width: 7px;
  height: 7px;
  border-radius: 999px;
  background: rgba(255,255,255,.22);
  box-shadow: 0 0 0 5px rgba(255,255,255,.055);
}

.k-svcSheet__cta{
  width: 100%;
  justify-content: center;
  margin-top: 6px;
}

/* Motion safety */
@media (prefers-reduced-motion: reduce){
  .k-svcOverlay{ backdrop-filter: none; -webkit-backdrop-filter: none; }
}
