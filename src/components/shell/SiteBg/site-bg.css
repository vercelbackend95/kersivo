/* =========================================
   Kersivo — Site Background (global, continuous)
   One cinematic backdrop across all sections
   ========================================= */

:root{
  /* cursor spotlight position (percent of viewport) */
  --mx: 55%;
  --my: 38%;
}

.site-bg{
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  overflow: hidden;
  background: var(--bg, #07070a);
}

/* Big soft lights */
.site-bg__spot{
  position: absolute;
  inset: -30%;
  background:
    radial-gradient(900px 620px at var(--mx) var(--my), rgba(255,255,255,.10), transparent 62%),
    radial-gradient(860px 620px at 62% 28%, rgba(120,110,255,.22), transparent 62%),
    radial-gradient(840px 660px at 40% 52%, rgba(210,120,255,.16), transparent 66%);
  filter: blur(18px);
  transform: translateZ(0);
}

/* -----------------------------------------
   Dotted grid — PINNED (no scroll drift)
   - fixed layer to avoid "follow the scroll" feel
   - no blur (blur causes raster jitter on scroll)
   ----------------------------------------- */
.site-bg__grid{
  position: fixed;          /* ✅ pin to viewport */
  inset: 0;
  left: 0;
  top: 0;

  /* presence */
  opacity: .22;

  background-image:
    radial-gradient(rgba(255,255,255,.20) .95px, transparent .95px),
    radial-gradient(rgba(190,145,255,.12) .80px, transparent .80px);

  background-size:
    24px 24px,
    24px 24px;

  background-position:
    0 0,
    12px 12px;

  /* ✅ stabilize painting */
  transform: translateZ(0);
  will-change: transform;

  /* film-like overlay blend */
  mix-blend-mode: screen;

  /* KEEP: mask focused top-ish so dots fade down + edges */
  mask-image: radial-gradient(70% 60% at 50% 25%, #000 28%, transparent 78%);
  -webkit-mask-image: radial-gradient(70% 60% at 50% 25%, #000 28%, transparent 78%);
}

/* -----------------------------------------
   (Optional) Extra micro-dust — also pinned
   Keep disabled unless you render it in SiteBg.astro
   ----------------------------------------- */
.site-bg__dust{
  display: none;
  position: fixed;          /* ✅ pin to viewport */
  inset: 0;
  left: 0;
  top: 0;

  opacity: .12;

  background-image:
    radial-gradient(rgba(255,255,255,.12) .70px, transparent .70px);

  background-size: 14px 14px;
  background-position: 7px 3px;

  transform: translateZ(0);
  will-change: transform;

  mix-blend-mode: overlay;

  mask-image: radial-gradient(70% 60% at 50% 25%, #000 22%, transparent 78%);
  -webkit-mask-image: radial-gradient(70% 60% at 50% 25%, #000 22%, transparent 78%);
}

@media (min-width: 820px){
  .site-bg__dust{ display: block; }
}

/* Grain-ish overlay (very soft) */
.site-bg__grain{
  position: absolute;
  inset: 0;
  opacity: .06;
  background-image: linear-gradient(0deg, rgba(255,255,255,.08), rgba(255,255,255,0));
  mix-blend-mode: overlay;
  mask-image: radial-gradient(70% 60% at 50% 22%, #000 25%, transparent 78%);
  -webkit-mask-image: radial-gradient(70% 60% at 50% 22%, #000 25%, transparent 78%);
}

/* Vignette to keep edges premium */
.site-bg__vignette{
  position: absolute;
  inset: -10%;
  background:
    radial-gradient(80% 70% at 50% 20%, transparent 55%, rgba(0,0,0,.55) 100%);
  opacity: .8;
}

/* Optional slow drift (feels alive, not annoying) */
@media (prefers-reduced-motion: no-preference){
  .site-bg__spot{
    animation: bgDrift 12s ease-in-out infinite alternate;
  }
  @keyframes bgDrift{
    0%{ transform: translate3d(0,0,0) scale(1); }
    100%{ transform: translate3d(1.2%, -0.8%, 0) scale(1.02); }
  }
}

.site-foreground{ position: relative; z-index: 1; }
