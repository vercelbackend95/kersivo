---
import "./hero.css";
import "../styles/laser.css";
import CtaButton from "./CtaButton.astro";
---

<section class="k3-hero" aria-label="Kersivo hero">
  <div class="k3-wrap">
    <div class="k3-center">
      <div class="k3-badges" data-reveal>
        <span class="k3-badge">
          <span class="k3-badge__dot" aria-hidden="true"></span>
          Now booking: 2 project slots
        </span>
      </div>

      <h1 class="k3-h1" data-reveal>
        We craft <span class="k3-grad">high-end</span><br class="k3-br" />
        websites that <span class="k3-grad2 k3-underline">convert</span>.
      </h1>

      <p class="k3-sub" data-reveal>
        Premium design, ruthless performance, and clear messaging â€” built for UK small businesses.
      </p>

      <div class="k3-cta" data-reveal>
        <CtaButton href="#contact" label="Get a quote" variant="primary" />
        <CtaButton href="#work" label="View work" variant="ghost" magnetic={false} />
      </div>

      <div class="k-pills" data-reveal aria-label="Key benefits">
        <span class="k-pill k-pill--accent">SEO foundations</span>
        <span class="k-pill">Astro-fast builds</span>
        <span class="k-pill">Mobile-first</span>
      </div>
    </div>
  </div>

  <script>
    (() => {
      const hero = document.querySelector(".k3-hero");
      if (!hero) return;

      const reduced =
        window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;

      // reveal
      const items = hero.querySelectorAll("[data-reveal]");
      if (items.length) hero.classList.add("k3-reveal");

      if (reduced) {
        items.forEach((el) => el.classList.add("is-in"));
      } else {
        const io = new IntersectionObserver(
          (entries) => {
            entries.forEach((en) => {
              if (en.isIntersecting) {
                en.target.classList.add("is-in");
                io.unobserve(en.target);
              }
            });
          },
          { threshold: 0.18 }
        );

        items.forEach((el, i) => {
          el.style.setProperty("--d", i * 75 + "ms");
          io.observe(el);
        });
      }
    })();
  </script>
</section>
